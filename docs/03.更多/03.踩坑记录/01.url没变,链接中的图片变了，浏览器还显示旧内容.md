---
title: url没变,链接中的图片变了，浏览器还显示旧内容
date: 2022-06-09 17:07:43
permalink: /pages/72d40c/
categories:
  - 更多
  - 踩坑记录
tags:
  - 踩坑
author: 
  name: hzzy
---

## 后端动态生成图片或者替换图片后，返回给前端的图片链接没变，浏览器显示的还是旧的内容？
问题原因：当浏览器第一次解析了图片地址后，会将其缓存下来，图片虽然改变了，但是链接没有发生变化，浏览器默认会从上次的缓存取出，所以图片没有发生变化

## 解决办法
<p>（1）后端每次重新生成的链接名字给随机名称</p>

`缺点：可能需要记录当前链接做查询之类的，如果随机图片名称，可能没办法追溯`

<p>（2）前端自己处理，给图片后面添加 ?随机数 或者给 ?时间,类似于版本控制</p>

```js
https:www.123.com/img.png + '?' + new Date()
// 或者
https:www.123.com/img.png + '?' + Math.random() * 1000000
```
